@using RED.Helpers

<nav class="navbar-default navbar-static-side" role="navigation">
    <div class="sidebar-collapse">
        <ul class="nav" id="side-menu">
            <li class="nav-header">
                <div class="dropdown profile-element">
                        <span class="clear">@Html.GetProfile()</span>
                    @*<ul class="dropdown-menu animated fadeInRight m-t-xs">
                        <li><a href="profile.html">Profile</a></li>
                    </ul>*@
                </div>
                <div class="logo-element">
                    РВС
                </div>
            </li>
            <li class="">
                <a href="/Home/Index">
                    <i class="fa fa-th-large">
                    </i> <span class="nav-label">Начало</span> 
                </a>
            </li>
            @if (Html.IsAuthorized(FeaturesCollection.ViewAdminsNRoles))
            {
                <li class="">
                    <a href="#">
                        <i class="fa fa-user-md">
                        </i> <span class="nav-label">Администратор</span>
                        <span class="fa arrow"></span>
                    </a>
                    <ul class="nav nav-second-level collapse nav-admin">
                        <li><a href="/Users/Index">Потребители</a></li>
                        <li><a href="/Roles/Index">Роли</a></li>
                        @if (Html.IsAuthorized(string.Empty))
                        {
                            <li><a href="/Features/Index">Права</a></li>
                        }
                    </ul>
                </li>
            }
            @if (Html.IsAuthorized(FeaturesCollection.ViewDiary))
            {
                <li class="">
                    <a href="/Diary/Index">
                        <i class="fa fa-book">
                        </i> <span class="nav-label">Дневник</span>
                    </a>
                </li>
            }
            @if (Html.IsAuthorized(FeaturesCollection.ViewTests))
            {
                <li class="">
                    <a href="#">
                        <i class="fa fa-area-chart">
                        </i> <span class="nav-label">Изследвания</span>
                        <span class="fa arrow"></span>
                    </a>
                    <ul class="nav nav-second-level collapse">
                            <li><a href="/Tests/Categories">Категории</a></li>
                            <li><a href="/Tests/Index">Изследвания</a></li>
                    </ul>
                </li>
            }
            @if (Html.IsAuthorized(FeaturesCollection.ViewClients))
            {
                <li class="">
                    <a href="/Clients/Index">
                        <i class="fa fa-users">
                        </i> <span class="nav-label">Клиенти</span>
                    </a>
                </li>
            }
            @if (Html.IsAuthorized(FeaturesCollection.ViewRequests))
            {
                <li class="">
                    <a href="/Requests/Index">
                        <i class="fa fa-tags">
                        </i> <span class="nav-label">Заявки</span>
                    </a>
                </li>
            }
            @if (Html.IsAuthorized(FeaturesCollection.ViewProtocols))
            {
                <li class="">
                    <a href="/Protocols/Index">
                        <i class="fa fa-clipboard">
                        </i> <span class="nav-label">Протоколи</span>
                    </a>
                </li>
            }
            @if (Html.IsAuthorized(FeaturesCollection.ViewRemarks))
            {
                <li class="">
                    <a href="/Remarks/Index">
                        <i class="fa fa-bookmark">
                        </i> <span class="nav-label">Забележки</span>
                    </a>
                </li>
            }
        </ul>
    </div>
</nav>
<script>
    $('.nav-second-level').each(function () {
        if($(this).children().length == 0){
            $(this).parent().remove();
        }
    });
</script>
